<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AfriTrade Connect - Business Manager</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üëî</text></svg>">
    <style>
        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #764ba2;
            --accent: #f093fb;
            --success: #48bb78;
            --warning: #ed8936;
            --error: #f56565;
            --bg-primary: #f7fafc;
            --bg-secondary: #edf2f7;
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --text-light: #718096;
            --white: #ffffff;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --border-radius-lg: 16px;
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* App Container */
        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            max-width: 100vw;
        }

        /* Header */
        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .currency-toggle {
            display: flex;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 4px;
        }

        .currency-btn {
            padding: 6px 12px;
            border: none;
            background: transparent;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .currency-btn.active {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        /* Main Content */
        .main {
            flex: 1;
            padding: 1rem;
            padding-bottom: 5rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* Page Sections */
        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--bg-secondary);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-light);
            font-weight: 600;
        }

        .stat-trend {
            font-size: 0.75rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }

        .trend-up {
            color: var(--success);
        }

        .trend-down {
            color: var(--error);
        }

        /* Forms */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--bg-secondary);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--white);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        @media (max-width: 640px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 0;
            }
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            min-height: 44px;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }

        .btn-full {
            width: 100%;
        }

        /* Profit Calculator */
        .profit-calculator {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0fff0 100%);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-left: 4px solid var(--success);
        }

        .profit-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(72, 187, 120, 0.2);
        }

        .profit-row:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 1.1rem;
            background: rgba(72, 187, 120, 0.1);
            margin: 0.5rem -1.5rem -1.5rem;
            padding: 1rem 1.5rem;
            border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
        }

        /* Customer List */
        .customer-list {
            display: grid;
            gap: 1rem;
        }

        .customer-card {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .customer-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .customer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .customer-name {
            font-weight: 700;
            color: var(--text-primary);
        }

        .customer-location {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        .customer-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Records List */
        .record-list {
            display: grid;
            gap: 0.75rem;
        }

        .record-item {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 1rem;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
        }

        .record-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .record-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .record-amount {
            font-weight: 700;
            color: var(--primary);
        }

        .record-details {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        /* Status Badges */
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-pending {
            background: rgba(237, 137, 54, 0.1);
            color: var(--warning);
        }

        .status-completed {
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
        }

        .status-transit {
            background: rgba(102, 126, 234, 0.1);
            color: var(--primary);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            border-top: 1px solid var(--bg-secondary);
            padding: 0.5rem;
            display: flex;
            justify-content: space-around;
            z-index: 100;
            box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 60px;
            text-decoration: none;
            color: var(--text-light);
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(102, 126, 234, 0.1);
        }

        .nav-icon {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }

        .nav-label {
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 1rem;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--white);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--bg-secondary);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            padding: 0.25rem;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            background: var(--bg-secondary);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--success);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            z-index: 1001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--error);
        }

        .notification.warning {
            background: var(--warning);
        }

        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-light);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .empty-description {
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        /* Responsive Design */
        @media (max-width: 640px) {
            .header {
                padding: 0.75rem 1rem;
            }

            .logo {
                font-size: 1rem;
            }

            .main {
                padding: 0.75rem;
            }

            .card {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stat-card {
                padding: 1rem;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .modal-content {
                padding: 1.5rem;
                margin: 0.5rem;
            }
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .mb-0 {
            margin-bottom: 0;
        }

        .mb-1 {
            margin-bottom: 0.5rem;
        }

        .mb-2 {
            margin-bottom: 1rem;
        }

        .mt-2 {
            margin-top: 1rem;
        }

        .hidden {
            display: none;
        }

        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-2 {
            gap: 1rem;
        }

        .w-full {
            width: 100%;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
</head>

<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span>üëî</span>
                    <span>AfriTrade Connect</span>
                </div>
                <div class="currency-toggle">
                    <button class="currency-btn active" data-currency="usd">USD</button>
                    <button class="currency-btn" data-currency="tzs">TZS</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Dashboard Page -->
            <div class="page active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-revenue">$0.00</div>
                        <div class="stat-label">Total Revenue</div>
                        <div class="stat-trend trend-up">
                            <span>üìà</span>
                            <span>+15% this month</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-expenses">$0.00</div>
                        <div class="stat-label">Expenses</div>
                        <div class="stat-trend trend-down">
                            <span>üìâ</span>
                            <span>-8% this month</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="net-profit">$0.00</div>
                        <div class="stat-label">Net Profit</div>
                        <div class="stat-trend trend-up">
                            <span>üí∞</span>
                            <span>+22% this month</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="active-orders">0</div>
                        <div class="stat-label">Active Orders</div>
                        <div class="stat-trend">
                            <span>üì¶</span>
                            <span>In progress</span>
                        </div>
                    </div>
                </div>

                <div class="profit-calculator">
                    <h3 class="card-title mb-2">üíπ Profit Calculator (35% Markup)</h3>
                    <div class="profit-row">
                        <span>Purchase Cost (Kariakoo):</span>
                        <span id="calc-purchase-cost">$0.00</span>
                    </div>
                    <div class="profit-row">
                        <span>35% Markup:</span>
                        <span id="calc-markup">$0.00</span>
                    </div>
                    <div class="profit-row">
                        <span>Selling Price:</span>
                        <span id="calc-selling-price">$0.00</span>
                    </div>
                    <div class="profit-row">
                        <span>Transport Cost:</span>
                        <span id="calc-transport">$0.00</span>
                    </div>
                    <div class="profit-row">
                        <span>Net Profit:</span>
                        <span id="calc-net-profit">$0.00</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìä Quick Actions</h3>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn btn-primary" onclick="openModal('order-modal')">
                            ‚ûï New Order
                        </button>
                        <button class="btn btn-secondary" onclick="openModal('purchase-modal')">
                            üõí Record Purchase
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìà Recent Activity</h3>
                    </div>
                    <div class="record-list" id="recent-activity">
                        <div class="empty-state">
                            <div class="empty-icon">üìã</div>
                            <div class="empty-title">No recent activity</div>
                            <div class="empty-description">Start by adding your first order or purchase</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers Page -->
            <div class="page" id="customers">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üë• Customers</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('customer-modal')">
                            ‚ûï Add Customer
                        </button>
                    </div>
                    <div class="customer-list" id="customer-list">
                        <div class="empty-state">
                            <div class="empty-icon">üë§</div>
                            <div class="empty-title">No customers yet</div>
                            <div class="empty-description">Add your first customer to get started</div>
                            <button class="btn btn-primary" onclick="openModal('customer-modal')">
                                Add Customer
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Page -->
            <div class="page" id="orders">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üì¶ Orders</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('order-modal')">
                            ‚ûï New Order
                        </button>
                    </div>
                    <div class="record-list" id="order-list">
                        <div class="empty-state">
                            <div class="empty-icon">üì¶</div>
                            <div class="empty-title">No orders yet</div>
                            <div class="empty-description">Create your first order to start tracking</div>
                            <button class="btn btn-primary" onclick="openModal('order-modal')">
                                Create Order
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Purchases Page -->
            <div class="page" id="purchases">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üõí Purchases</h3>
                        <button class="btn btn-primary btn-sm" onclick="openModal('purchase-modal')">
                            ‚ûï Record Purchase
                        </button>
                    </div>
                    <div class="record-list" id="purchase-list">
                        <div class="empty-state">
                            <div class="empty-icon">üõí</div>
                            <div class="empty-title">No purchases yet</div>
                            <div class="empty-description">Record your first Kariakoo purchase</div>
                            <button class="btn btn-primary" onclick="openModal('purchase-modal')">
                                Record Purchase
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="settings">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">‚öôÔ∏è Settings</h3>
                    </div>
                    <form id="settings-form">
                        <div class="form-group">
                            <label class="form-label">Exchange Rate (1 USD to TZS)</label>
                            <input type="number" class="form-input" id="exchange-rate" value="2300" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Business Name</label>
                            <input type="text" class="form-input" id="business-name" value="AfriTrade Connect">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Markup Percentage (%)</label>
                            <input type="number" class="form-input" id="markup-percentage" value="35" min="0" max="100">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Default Transport Cost (USD)</label>
                            <input type="number" class="form-input" id="transport-cost" value="50" step="0.01">
                        </div>
                        <button type="submit" class="btn btn-success btn-full">
                            üíæ Save Settings
                        </button>
                    </form>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìä Data Management</h3>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn btn-secondary" onclick="exportData()">
                            üì§ Export Data
                        </button>
                        <button class="btn btn-danger" onclick="resetData()">
                            üóëÔ∏è Reset All
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active" data-page="dashboard">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Dashboard</div>
            </a>
            <a href="#" class="nav-item" data-page="customers">
                <div class="nav-icon">üë•</div>
                <div class="nav-label">Customers</div>
            </a>
            <a href="#" class="nav-item" data-page="orders">
                <div class="nav-icon">üì¶</div>
                <div class="nav-label">Orders</div>
            </a>
            <a href="#" class="nav-item" data-page="purchases">
                <div class="nav-icon">üõí</div>
                <div class="nav-label">Purchases</div>
            </a>
            <a href="#" class="nav-item" data-page="settings">
                <div class="nav-icon">‚öôÔ∏è</div>
                <div class="nav-label">Settings</div>
            </a>
        </nav>
    </div>

    <!-- Modals -->
    <!-- Customer Modal -->
    <div class="modal" id="customer-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Customer</h3>
                <button class="close-btn" onclick="closeModal('customer-modal')">&times;</button>
            </div>
            <form id="customer-form">
                <div class="form-group">
                    <label class="form-label">Customer Name</label>
                    <input type="text" class="form-input" id="customer-name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-input" id="customer-phone" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Location</label>
                    <select class="form-input" id="customer-location" required>
                        <option value="">Select Location</option>
                        <option value="Harare">Harare</option>
                        <option value="Bulawayo">Bulawayo</option>
                        <option value="Gweru">Gweru</option>
                        <option value="Mutare">Mutare</option>
                        <option value="Masvingo">Masvingo</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-success btn-full">
                    üíæ Save Customer
                </button>
            </form>
        </div>
    </div>

    <!-- Order Modal -->
    <div class="modal" id="order-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">New Order</h3>
                <button class="close-btn" onclick="closeModal('order-modal')">&times;</button>
            </div>
            <form id="order-form">
                <div class="form-group">
                    <label class="form-label">Customer</label>
                    <select class="form-input" id="order-customer" required>
                        <option value="">Select Customer</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Items Description</label>
                    <textarea class="form-input" id="order-items" rows="3"
                        placeholder="e.g., 5x Men's T-shirts, 3x Women's Dresses" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Quantity</label>
                        <input type="number" class="form-input" id="order-quantity" min="1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Total Amount (USD)</label>
                        <input type="number" class="form-input" id="order-amount" step="0.01" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-input" id="order-status" required>
                        <option value="pending">Pending Payment</option>
                        <option value="paid">Paid</option>
                        <option value="purchasing">Purchasing</option>
                        <option value="shipping">Shipping</option>
                        <option value="delivered">Delivered</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-success btn-full">
                    üíæ Save Order
                </button>
            </form>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div class="modal" id="purchase-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Record Purchase</h3>
                <button class="close-btn" onclick="closeModal('purchase-modal')">&times;</button>
            </div>
            <form id="purchase-form">
                <div class="form-group">
                    <label class="form-label">Related Order</label>
                    <select class="form-input" id="purchase-order">
                        <option value="">Select Order (Optional)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Item Description</label>
                    <input type="text" class="form-input" id="purchase-item" placeholder="e.g., Men's T-shirts"
                        required>
                </div>
                <div class="form-group">
                    <label class="form-label">Shop/Vendor</label>
                    <input type="text" class="form-input" id="purchase-shop" placeholder="e.g., Shop 45, Kariakoo"
                        required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Quantity</label>
                        <input type="number" class="form-input" id="purchase-quantity" min="1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Cost per Item (TZS)</label>
                        <input type="number" class="form-input" id="purchase-unit-cost" step="0.01" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Total Cost (TZS)</label>
                    <input type="number" class="form-input" id="purchase-total-cost" readonly>
                </div>
                <button type="submit" class="btn btn-success btn-full">
                    üíæ Record Purchase
                </button>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <span id="notification-text"></span>
    </div>

    <script>
        // App State Management
        class AfriTradeApp {
            constructor() {
                this.data = this.loadData();
                this.currentCurrency = 'usd';
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateUI();
                this.loadCustomerOptions();
                this.loadOrderOptions();
            }

            loadData() {
                const defaultData = {
                    settings: {
                        exchangeRate: 2300,
                        businessName: 'AfriTrade Connect',
                        markupPercentage: 35,
                        transportCost: 50
                    },
                    customers: [],
                    orders: [],
                    purchases: []
                };

                const stored = localStorage.getItem('afritrade-data');
                return stored ? { ...defaultData, ...JSON.parse(stored) } : defaultData;
            }

            saveData() {
                localStorage.setItem('afritrade-data', JSON.stringify(this.data));
            }

            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showPage(item.dataset.page);
                    });
                });

                // Currency toggle
                document.querySelectorAll('.currency-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.currency-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.currentCurrency = btn.dataset.currency;
                        this.updateUI();
                    });
                });

                // Forms
                document.getElementById('customer-form').addEventListener('submit', (e) => this.handleCustomerSubmit(e));
                document.getElementById('order-form').addEventListener('submit', (e) => this.handleOrderSubmit(e));
                document.getElementById('purchase-form').addEventListener('submit', (e) => this.handlePurchaseSubmit(e));
                document.getElementById('settings-form').addEventListener('submit', (e) => this.handleSettingsSubmit(e));

                // Purchase cost calculation
                document.getElementById('purchase-quantity').addEventListener('input', () => this.calculatePurchaseTotal());
                document.getElementById('purchase-unit-cost').addEventListener('input', () => this.calculatePurchaseTotal());

                // Modal close on background click
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            this.closeModal(modal.id);
                        }
                    });
                });
            }

            showPage(pageId) {
                // Update navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.toggle('active', item.dataset.page === pageId);
                });

                // Show page
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.toggle('active', page.id === pageId);
                });

                // Update page content
                this.updatePageContent(pageId);
            }

            updatePageContent(pageId) {
                switch (pageId) {
                    case 'customers':
                        this.renderCustomers();
                        break;
                    case 'orders':
                        this.renderOrders();
                        break;
                    case 'purchases':
                        this.renderPurchases();
                        break;
                    case 'settings':
                        this.loadSettings();
                        break;
                }
            }

            updateUI() {
                this.updateDashboard();
                this.updateProfitCalculator();
            }

            updateDashboard() {
                const stats = this.calculateStats();

                document.getElementById('total-revenue').textContent = this.formatCurrency(stats.totalRevenue);
                document.getElementById('total-expenses').textContent = this.formatCurrency(stats.totalExpenses);
                document.getElementById('net-profit').textContent = this.formatCurrency(stats.netProfit);
                document.getElementById('active-orders').textContent = stats.activeOrders;

                this.renderRecentActivity();
            }

            calculateStats() {
                const completedOrders = this.data.orders.filter(order =>
                    order.status === 'delivered' || order.status === 'paid'
                );

                const totalRevenue = completedOrders.reduce((sum, order) => sum + order.amount, 0);

                const totalExpenses = this.data.purchases.reduce((sum, purchase) => {
                    return sum + (purchase.totalCost / this.data.settings.exchangeRate);
                }, 0);

                const netProfit = totalRevenue - totalExpenses;
                const activeOrders = this.data.orders.filter(order =>
                    order.status !== 'delivered' && order.status !== 'cancelled'
                ).length;

                return { totalRevenue, totalExpenses, netProfit, activeOrders };
            }

            updateProfitCalculator() {
                const recentPurchase = this.data.purchases[this.data.purchases.length - 1];

                if (recentPurchase) {
                    const purchaseCostUSD = recentPurchase.totalCost / this.data.settings.exchangeRate;
                    const markup = purchaseCostUSD * (this.data.settings.markupPercentage / 100);
                    const sellingPrice = purchaseCostUSD + markup;
                    const transportCost = this.data.settings.transportCost;
                    const netProfit = markup - transportCost;

                    document.getElementById('calc-purchase-cost').textContent = this.formatCurrency(purchaseCostUSD);
                    document.getElementById('calc-markup').textContent = this.formatCurrency(markup);
                    document.getElementById('calc-selling-price').textContent = this.formatCurrency(sellingPrice);
                    document.getElementById('calc-transport').textContent = this.formatCurrency(transportCost);
                    document.getElementById('calc-net-profit').textContent = this.formatCurrency(netProfit);
                } else {
                    // Show example calculation
                    const exampleCost = 100;
                    const markup = exampleCost * (this.data.settings.markupPercentage / 100);
                    const sellingPrice = exampleCost + markup;
                    const transportCost = this.data.settings.transportCost;
                    const netProfit = markup - transportCost;

                    document.getElementById('calc-purchase-cost').textContent = this.formatCurrency(exampleCost);
                    document.getElementById('calc-markup').textContent = this.formatCurrency(markup);
                    document.getElementById('calc-selling-price').textContent = this.formatCurrency(sellingPrice);
                    document.getElementById('calc-transport').textContent = this.formatCurrency(transportCost);
                    document.getElementById('calc-net-profit').textContent = this.formatCurrency(netProfit);
                }
            }

            renderRecentActivity() {
                const container = document.getElementById('recent-activity');
                const allRecords = [
                    ...this.data.orders.map(order => ({ ...order, type: 'order' })),
                    ...this.data.purchases.map(purchase => ({ ...purchase, type: 'purchase' }))
                ].sort((a, b) => new Date(b.date || b.createdAt) - new Date(a.date || a.createdAt))
                    .slice(0, 5);

                if (allRecords.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üìã</div>
                            <div class="empty-title">No recent activity</div>
                            <div class="empty-description">Start by adding your first order or purchase</div>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = allRecords.map(record => {
                    const customer = this.data.customers.find(c => c.id === record.customerId);
                    const customerName = customer ? customer.name : 'Unknown Customer';

                    if (record.type === 'order') {
                        return `
                            <div class="record-item">
                                <div class="record-header">
                                    <div class="record-title">üì¶ Order #${record.id}</div>
                                    <div class="record-amount">${this.formatCurrency(record.amount)}</div>
                                </div>
                                <div class="record-details">
                                    ${customerName} ‚Ä¢ ${record.items} ‚Ä¢ ${this.getStatusBadge(record.status)}
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="record-item">
                                <div class="record-header">
                                    <div class="record-title">üõí Purchase</div>
                                    <div class="record-amount">${this.formatCurrency(record.totalCost / this.data.settings.exchangeRate)}</div>
                                </div>
                                <div class="record-details">
                                    ${record.item} ‚Ä¢ ${record.shop} ‚Ä¢ Qty: ${record.quantity}
                                </div>
                            </div>
                        `;
                    }
                }).join('');
            }

            renderCustomers() {
                const container = document.getElementById('customer-list');

                if (this.data.customers.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üë§</div>
                            <div class="empty-title">No customers yet</div>
                            <div class="empty-description">Add your first customer to get started</div>
                            <button class="btn btn-primary" onclick="app.openModal('customer-modal')">
                                Add Customer
                            </button>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.data.customers.map(customer => {
                    const customerOrders = this.data.orders.filter(order => order.customerId === customer.id);
                    const totalSpent = customerOrders.reduce((sum, order) => sum + order.amount, 0);

                    return `
                        <div class="customer-card" onclick="app.showCustomerDetails(${customer.id})">
                            <div class="customer-header">
                                <div>
                                    <div class="customer-name">${customer.name}</div>
                                    <div class="customer-location">üìç ${customer.location}</div>
                                </div>
                                <div class="text-right">
                                    <div class="customer-name">${this.formatCurrency(totalSpent)}</div>
                                    <div class="customer-location">${customerOrders.length} orders</div>
                                </div>
                            </div>
                            <div class="customer-stats">
                                <span>üìû ${customer.phone}</span>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderOrders() {
                const container = document.getElementById('order-list');

                if (this.data.orders.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üì¶</div>
                            <div class="empty-title">No orders yet</div>
                            <div class="empty-description">Create your first order to start tracking</div>
                            <button class="btn btn-primary" onclick="app.openModal('order-modal')">
                                Create Order
                            </button>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.data.orders.map(order => {
                    const customer = this.data.customers.find(c => c.id === order.customerId);
                    const customerName = customer ? customer.name : 'Unknown Customer';

                    return `
                        <div class="record-item">
                            <div class="record-header">
                                <div class="record-title">üì¶ Order #${order.id}</div>
                                <div class="record-amount">${this.formatCurrency(order.amount)}</div>
                            </div>
                            <div class="record-details">
                                ${customerName} ‚Ä¢ ${order.items} ‚Ä¢ ${this.getStatusBadge(order.status)}
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderPurchases() {
                const container = document.getElementById('purchase-list');

                if (this.data.purchases.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üõí</div>
                            <div class="empty-title">No purchases yet</div>
                            <div class="empty-description">Record your first Kariakoo purchase</div>
                            <button class="btn btn-primary" onclick="app.openModal('purchase-modal')">
                                Record Purchase
                            </button>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.data.purchases.map(purchase => {
                    const order = this.data.orders.find(o => o.id === purchase.orderId);
                    const orderInfo = order ? `Order #${order.id}` : 'No linked order';

                    return `
                        <div class="record-item">
                            <div class="record-header">
                                <div class="record-title">üõí ${purchase.item}</div>
                                <div class="record-amount">${this.formatCurrency(purchase.totalCost / this.data.settings.exchangeRate)}</div>
                            </div>
                            <div class="record-details">
                                ${purchase.shop} ‚Ä¢ Qty: ${purchase.quantity} ‚Ä¢ ${orderInfo}
                            </div>
                        </div>
                    `;
                }).join('');
            }

            getStatusBadge(status) {
                const statusMap = {
                    pending: { class: 'status-pending', text: 'Pending' },
                    paid: { class: 'status-completed', text: 'Paid' },
                    purchasing: { class: 'status-transit', text: 'Purchasing' },
                    shipping: { class: 'status-transit', text: 'Shipping' },
                    delivered: { class: 'status-completed', text: 'Delivered' }
                };

                const statusInfo = statusMap[status] || { class: 'status-pending', text: status };
                return `<span class="status-badge ${statusInfo.class}">${statusInfo.text}</span>`;
            }

            loadCustomerOptions() {
                const selects = ['order-customer', 'purchase-order'];
                selects.forEach(selectId => {
                    const select = document.getElementById(selectId);
                    if (selectId === 'order-customer') {
                        select.innerHTML = '<option value="">Select Customer</option>' +
                            this.data.customers.map(customer =>
                                `<option value="${customer.id}">${customer.name}</option>`
                            ).join('');
                    }
                });
            }

            loadOrderOptions() {
                const select = document.getElementById('purchase-order');
                const pendingOrders = this.data.orders.filter(order =>
                    order.status === 'paid' || order.status === 'purchasing'
                );

                select.innerHTML = '<option value="">Select Order (Optional)</option>' +
                    pendingOrders.map(order => {
                        const customer = this.data.customers.find(c => c.id === order.customerId);
                        const customerName = customer ? customer.name : 'Unknown';
                        return `<option value="${order.id}">Order #${order.id} - ${customerName}</option>`;
                    }).join('');
            }

            loadSettings() {
                document.getElementById('exchange-rate').value = this.data.settings.exchangeRate;
                document.getElementById('business-name').value = this.data.settings.businessName;
                document.getElementById('markup-percentage').value = this.data.settings.markupPercentage;
                document.getElementById('transport-cost').value = this.data.settings.transportCost;
            }

            calculatePurchaseTotal() {
                const quantity = parseInt(document.getElementById('purchase-quantity').value) || 0;
                const unitCost = parseFloat(document.getElementById('purchase-unit-cost').value) || 0;
                document.getElementById('purchase-total-cost').value = quantity * unitCost;
            }

            handleCustomerSubmit(e) {
                e.preventDefault();
                const formData = new FormData(e.target);

                const customer = {
                    id: Date.now(),
                    name: document.getElementById('customer-name').value,
                    phone: document.getElementById('customer-phone').value,
                    location: document.getElementById('customer-location').value,
                    createdAt: new Date().toISOString()
                };

                this.data.customers.push(customer);
                this.saveData();
                this.loadCustomerOptions();
                this.closeModal('customer-modal');
                this.showNotification('Customer added successfully! üë§', 'success');
                e.target.reset();
            }

            handleOrderSubmit(e) {
                e.preventDefault();

                const order = {
                    id: Date.now(),
                    customerId: parseInt(document.getElementById('order-customer').value),
                    items: document.getElementById('order-items').value,
                    quantity: parseInt(document.getElementById('order-quantity').value),
                    amount: parseFloat(document.getElementById('order-amount').value),
                    status: document.getElementById('order-status').value,
                    date: new Date().toISOString()
                };

                this.data.orders.push(order);
                this.saveData();
                this.loadOrderOptions();
                this.updateUI();
                this.closeModal('order-modal');
                this.showNotification('Order created successfully! üì¶', 'success');
                e.target.reset();
            }

            handlePurchaseSubmit(e) {
                e.preventDefault();

                const purchase = {
                    id: Date.now(),
                    orderId: document.getElementById('purchase-order').value || null,
                    item: document.getElementById('purchase-item').value,
                    shop: document.getElementById('purchase-shop').value,
                    quantity: parseInt(document.getElementById('purchase-quantity').value),
                    unitCost: parseFloat(document.getElementById('purchase-unit-cost').value),
                    totalCost: parseFloat(document.getElementById('purchase-total-cost').value),
                    date: new Date().toISOString()
                };

                this.data.purchases.push(purchase);
                this.saveData();
                this.updateUI();
                this.closeModal('purchase-modal');
                this.showNotification('Purchase recorded successfully! üõí', 'success');
                e.target.reset();
            }

            handleSettingsSubmit(e) {
                e.preventDefault();

                this.data.settings = {
                    exchangeRate: parseFloat(document.getElementById('exchange-rate').value),
                    businessName: document.getElementById('business-name').value,
                    markupPercentage: parseInt(document.getElementById('markup-percentage').value),
                    transportCost: parseFloat(document.getElementById('transport-cost').value)
                };

                this.saveData();
                this.updateUI();
                this.showNotification('Settings saved successfully! ‚öôÔ∏è', 'success');
            }

            formatCurrency(amount) {
                if (this.currentCurrency === 'usd') {
                    return '$' + amount.toFixed(2);
                } else {
                    const tzsAmount = amount * this.data.settings.exchangeRate;
                    return 'TZS ' + tzsAmount.toLocaleString();
                }
            }

            openModal(modalId) {
                document.getElementById(modalId).classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            closeModal(modalId) {
                document.getElementById(modalId).classList.remove('active');
                document.body.style.overflow = '';
            }

            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                const text = document.getElementById('notification-text');

                text.textContent = message;
                notification.className = `notification ${type} show`;

                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            exportData() {
                const dataStr = JSON.stringify(this.data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);

                const link = document.createElement('a');
                link.href = url;
                link.download = 'afritrade-data.json';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                this.showNotification('Data exported successfully! üì§', 'success');
            }

            resetData() {
                if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                    localStorage.removeItem('afritrade-data');
                    location.reload();
                }
            }
        }

        // Global functions for inline event handlers
        function openModal(modalId) {
            app.openModal(modalId);
        }

        function closeModal(modalId) {
            app.closeModal(modalId);
        }

        function exportData() {
            app.exportData();
        }

        function resetData() {
            app.resetData();
        }

        // Initialize app
        const app = new AfriTradeApp();
    </script>
</body>

</html>
